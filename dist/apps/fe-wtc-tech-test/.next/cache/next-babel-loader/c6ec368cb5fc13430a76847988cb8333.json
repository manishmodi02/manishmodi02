{"ast":null,"code":"var _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$();\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Container, Title, ListContainer, Grid, CardContainer, Poster, PosterContainer, IconContainer, RatingsContainer, Ratings, StarsContainer } from './Home.styles';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport StarIcon from '@material-ui/icons/Star';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nexport var useMovies = function useMovies() {\n  _s4();\n\n  _s();\n\n  var _useState = useState([]),\n      movies = _useState[0],\n      setMovies = _useState[1];\n\n  useEffect(function () {\n    fetchMovies();\n  }, []);\n\n  var fetchMovies = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch('http://localhost:3333/api/movies');\n\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return response.json();\n\n            case 6:\n              data = _context.sent;\n\n              if (data.length) {\n                setMovies(data);\n              }\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function fetchMovies() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var updateMovieState = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(movieId, body) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch(\"http://localhost:3333/api/movies/id/\".concat(movieId), {\n                method: 'PUT',\n                headers: {\n                  accept: '*/*',\n                  'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: \"saved=\".concat(body.saved, \"&watched=\").concat(body.watched)\n              });\n\n            case 3:\n              response = _context2.sent;\n\n              if (response.status === 200) {\n                fetchMovies();\n              }\n\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function updateMovieState(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return {\n    movies: movies,\n    updateMovieState: updateMovieState\n  };\n};\n\n_s4(useMovies, \"lMQl6si+ilM9A3X8eeuB7CPv+nU=\");\n\n_s(useMovies, \"MO6b3PSP3RIUqZ8gtSrBZBVtBbs=\");\n\nvar StarRatings = function StarRatings(_ref3) {\n  var _ref3$ratings = _ref3.ratings,\n      ratings = _ref3$ratings === void 0 ? 0 : _ref3$ratings;\n  var starsArray = Array.from({\n    length: 5\n  });\n  return __jsx(StarsContainer, null, starsArray.map(function (i, index) {\n    return index >= Math.floor(ratings / 2) ? __jsx(StarBorderIcon, {\n      key: \"\".concat(i, \"-\").concat(index)\n    }) : __jsx(StarIcon, {\n      key: \"\".concat(i, \"-\").concat(index)\n    });\n  }));\n};\n\n_c4 = StarRatings;\n_c = StarRatings;\nexport var MovieCard = function MovieCard(_ref4) {\n  _s5();\n\n  _s2();\n\n  var movie = _ref4.movie,\n      index = _ref4.index,\n      updateMovieState = _ref4.updateMovieState;\n  var EyeIcon = useMemo(function () {\n    return movie.Watched === 'True' ? VisibilityIcon : VisibilityOffIcon;\n  }, [movie.Watched]);\n  var HeartIcon = useMemo(function () {\n    return movie.Saved === 'True' ? FavoriteIcon : FavoriteBorderIcon;\n  }, [movie.Saved]);\n  return __jsx(CardContainer, {\n    key: \"\".concat(movie.imdbID, \"-\").concat(index)\n  }, __jsx(IconContainer, null, __jsx(\"div\", {\n    \"data-testid\": \"view-btn-div\",\n    onClick: function onClick() {\n      return updateMovieState(movie.imdbID, {\n        watched: movie.Watched !== 'True'\n      });\n    }\n  }, __jsx(EyeIcon, null)), __jsx(\"div\", {\n    \"data-testid\": \"like-btn-div\",\n    onClick: function onClick() {\n      return updateMovieState(movie.imdbID, {\n        watched: movie.Watched !== 'True',\n        saved: movie.Saved !== 'True'\n      });\n    }\n  }, __jsx(HeartIcon, null))), __jsx(PosterContainer, null, __jsx(Poster, {\n    src: movie.Poster\n  })), __jsx(RatingsContainer, {\n    \"data-testid\": \"rating-container\"\n  }, __jsx(Ratings, null, \"(\".concat(movie.imdbRating, \")\")), __jsx(StarRatings, {\n    ratings: Number(movie.imdbRating)\n  })));\n};\n\n_s5(MovieCard, \"4G1UKbs3UcMfBOxEUIWOoB19btk=\");\n\n_c5 = MovieCard;\n\n_s2(MovieCard, \"4G1UKbs3UcMfBOxEUIWOoB19btk=\");\n\n_c2 = MovieCard;\n\nvar Home = function Home() {\n  _s6();\n\n  _s3();\n\n  var _useMovies = useMovies(),\n      movies = _useMovies.movies,\n      updateMovieState = _useMovies.updateMovieState;\n\n  return __jsx(Container, null, __jsx(Title, {\n    \"data-testid\": \"count-title\"\n  }, \"Movies \", \"(\".concat(movies.length, \")\")), __jsx(ListContainer, null, __jsx(Grid, null, movies.map(function (movie, index) {\n    return __jsx(MovieCard, {\n      \"data-testid\": \"MovieCard-element\",\n      movie: movie,\n      updateMovieState: updateMovieState,\n      index: index\n    });\n  }))));\n};\n\n_s6(Home, \"7a0Fun5cobX2aVfM7PZpfjKXuWo=\", false, function () {\n  return [useMovies];\n});\n\n_c6 = Home;\n\n_s3(Home, \"ApN+Z/Bq1L4o43q4SBNDe9vD+3Y=\", false, function () {\n  return [useMovies];\n});\n\n_c3 = Home;\nexport default Home;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StarRatings\");\n$RefreshReg$(_c2, \"MovieCard\");\n$RefreshReg$(_c3, \"Home\");\n;\n\nvar _a, _b; // Legacy CSS implementations will `eval` browser code in a Node.js context\n// to extract CSS. For backwards compatibility, we need to check we're in a\n// browser context before continuing.\n\n\nif (typeof self !== 'undefined' && // AMP / No-JS mode does not inject these helpers:\n'$RefreshHelpers$' in self) {\n  var currentExports = module.__proto__.exports;\n  var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null; // This cannot happen in MainTemplate because the exports mismatch between\n  // templating and execution.\n\n  self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id); // A module can be accepted automatically based on its exports, e.g. when\n  // it is a Refresh Boundary.\n\n  if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n    // Save the previous exports on update so we can compare the boundary\n    // signatures.\n    module.hot.dispose(function (data) {\n      data.prevExports = currentExports;\n    }); // Unconditionally accept an update to this module, we'll check if it's\n    // still a Refresh Boundary later.\n\n    module.hot.accept(); // This field is set when the previous version of this module was a\n    // Refresh Boundary, letting us know we need to check for invalidation or\n    // enqueue an update.\n\n    if (prevExports !== null) {\n      // A boundary can become ineligible if its exports are incompatible\n      // with the previous exports.\n      //\n      // For example, if you add/remove/change exports, we'll want to\n      // re-execute the importing modules, and force those components to\n      // re-render. Similarly, if you convert a class component to a\n      // function, we want to invalidate the boundary.\n      if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n        module.hot.invalidate();\n      } else {\n        self.$RefreshHelpers$.scheduleUpdate();\n      }\n    }\n  } else {\n    // Since we just executed the code for the module, it's possible that the\n    // new exports made it ineligible for being a boundary.\n    // We only care about the case when we were _previously_ a boundary,\n    // because we already accepted this update (accidental side effect).\n    var isNoLongerABoundary = prevExports !== null;\n\n    if (isNoLongerABoundary) {\n      module.hot.invalidate();\n    }\n  }\n}\n\nvar _c4, _c5, _c6;\n\n$RefreshReg$(_c4, \"StarRatings\");\n$RefreshReg$(_c5, \"MovieCard\");\n$RefreshReg$(_c6, \"Home\");","map":{"version":3,"sources":["C:/Users/ManishModi/Downloads/WTC/apps/fe-wtc-tech-test/pages/home/index.tsx"],"names":["useMovies","movies","setMovies","useState","useEffect","fetchMovies","response","fetch","data","console","updateMovieState","method","headers","accept","body","StarRatings","ratings","starsArray","length","Math","MovieCard","movie","index","EyeIcon","useMemo","HeartIcon","watched","saved","Poster","Number","Home"],"mappings":"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","sourcesContent":["import React, { FC, useEffect, useMemo, useState } from 'react';\n\nimport { Movie } from 'apps/fe-wtc-tech-test/types/movie';\nimport {\n  Container,\n  Title,\n  ListContainer,\n  Grid,\n  CardContainer,\n  Poster,\n  PosterContainer,\n  IconContainer,\n  RatingsContainer,\n  Ratings,\n  StarsContainer,\n} from './Home.styles';\n\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport StarIcon from '@material-ui/icons/Star';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\n\nexport const useMovies = () => {\n  const [movies, setMovies] = useState<Movie[]>([]);\n\n  useEffect(() => {\n    fetchMovies();\n  }, []);\n  const fetchMovies = async () => {\n    try {\n      const response = await fetch('http://localhost:3333/api/movies');\n\n      const data: Movie[] = await response.json();\n\n      if (data.length) {\n        setMovies(data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const updateMovieState = async (movieId, body) => {\n    try {\n      const response = await fetch(\n        `http://localhost:3333/api/movies/id/${movieId}`,\n        {\n          method: 'PUT',\n          headers: {\n            accept: '*/*',\n            'Content-Type': 'application/x-www-form-urlencoded',\n          },\n          body: `saved=${body.saved}&watched=${body.watched}`,\n        }\n      );\n\n      if (response.status === 200) {\n        fetchMovies();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return {\n    movies,\n    updateMovieState,\n  };\n};\n\nconst StarRatings: FC<{ ratings: number }> = ({ ratings = 0 }) => {\n  const starsArray = Array.from({ length: 5 });\n\n  return (\n    <StarsContainer>\n      {starsArray.map((i, index) =>\n        index >= Math.floor(ratings / 2) ? (\n          <StarBorderIcon key={`${i}-${index}`} />\n        ) : (\n          <StarIcon key={`${i}-${index}`} />\n        )\n      )}\n    </StarsContainer>\n  );\n};\n\ntype MovieCardProps = {\n  movie: Movie;\n  index: number;\n  updateMovieState: (movieId: string, body: object) => void;\n};\n\nexport const MovieCard: FC<MovieCardProps> = ({\n  movie,\n  index,\n  updateMovieState,\n}) => {\n  const EyeIcon = useMemo(\n    () => (movie.Watched === 'True' ? VisibilityIcon : VisibilityOffIcon),\n    [movie.Watched]\n  );\n\n  const HeartIcon = useMemo(\n    () => (movie.Saved === 'True' ? FavoriteIcon : FavoriteBorderIcon),\n    [movie.Saved]\n  );\n\n  return (\n    <CardContainer key={`${movie.imdbID}-${index}`}>\n      <IconContainer>\n        <div\n          data-testid=\"view-btn-div\"\n          onClick={() =>\n            updateMovieState(movie.imdbID, {\n              watched: movie.Watched !== 'True'\n                        })\n          }\n        >\n          <EyeIcon />\n        </div>\n        <div data-testid=\"like-btn-div\"\n          onClick={() =>\n            updateMovieState(movie.imdbID, {\n              watched: movie.Watched !== 'True',\n              saved: movie.Saved !== 'True',\n            })\n          }\n          >\n          <HeartIcon />\n        </div>\n      </IconContainer>\n      <PosterContainer>\n        <Poster src={movie.Poster} />\n      </PosterContainer>\n      <RatingsContainer data-testid=\"rating-container\">\n        <Ratings>{`(${movie.imdbRating})`}</Ratings>\n        <StarRatings ratings={Number(movie.imdbRating)} />\n      </RatingsContainer>\n    </CardContainer>\n  );\n};\n\nconst Home: FC = () => {\n  const { movies, updateMovieState } = useMovies();\n\n  return (\n    <Container>\n      <Title data-testid=\"count-title\">Movies {`(${movies.length})`}</Title>\n      <ListContainer>\n        <Grid>\n          {movies.map((movie, index) => (\n            <MovieCard\n              data-testid=\"MovieCard-element\"\n              movie={movie}\n              updateMovieState={updateMovieState}\n              index={index}\n            />\n          ))}\n        </Grid>\n      </ListContainer>\n    </Container>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}